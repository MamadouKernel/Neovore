@model Neovore.Web.Domain.Entities.SiteSettings
@{
    ViewData["Title"] = "Paramètres du site";
}
<div class="page-header">
  <h1 class="page-title">Paramètres du site</h1>
  <p class="page-subtitle">Configurer les informations générales du site</p>
</div>

@if (ViewBag.Message != null)
{
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    <i class="bi bi-check-circle me-2"></i>@ViewBag.Message
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
}

<div class="admin-card">
  <div class="card-body p-4">
    <form method="post" enctype="multipart/form-data">
      @Html.AntiForgeryToken()

      <div class="row g-4">
        <div class="col-12">
          <h3 class="h5 fw-bold mb-3">
            <i class="bi bi-building me-2" style="color: #FF6B35;"></i>Informations de l'entreprise
          </h3>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">Nom de l'entreprise *</label>
          <input asp-for="NomEntreprise" class="form-control" placeholder="NÉOVORE" required />
          <span asp-validation-for="NomEntreprise" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-image me-2"></i>Logo du site
          </label>
          <input type="file" name="logoFile" accept="image/*" class="form-control" />
          <small class="text-muted">Formats acceptés : JPG, PNG, GIF, WebP. Laisser vide pour conserver le logo actuel.</small>
          @if (!string.IsNullOrEmpty(Model.LogoUrl))
          {
            <div class="mt-2">
              <p class="small mb-1">Logo actuel :</p>
              <img src="@Model.LogoUrl" alt="Logo actuel" style="max-height: 80px; max-width: 200px; border: 1px solid #ddd; border-radius: 4px; padding: 4px;" />
            </div>
          }
          <span asp-validation-for="LogoUrl" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">Email de contact</label>
          <input asp-for="EmailContact" type="email" class="form-control" placeholder="contact@example.com" />
          <span asp-validation-for="EmailContact" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">Téléphone</label>
          <input asp-for="TelephoneContact" class="form-control" placeholder="+33 X XX XX XX XX" />
          <span asp-validation-for="TelephoneContact" class="text-danger small"></span>
        </div>

        <div class="col-12">
          <label class="form-label fw-bold">Adresse</label>
          <input asp-for="Adresse" class="form-control" placeholder="Adresse complète" />
          <span asp-validation-for="Adresse" class="text-danger small"></span>
        </div>

        <div class="col-12 mt-4">
          <h3 class="h5 fw-bold mb-3">
            <i class="bi bi-bar-chart me-2" style="color: #FF6B35;"></i>Statistiques page d'accueil
          </h3>
        </div>

        <div class="col-md-4">
          <label class="form-label fw-bold">Années d'expérience</label>
          <input asp-for="AnneesExperience" class="form-control" placeholder="+10" />
          <small class="text-muted">Ex: +10, 15+, etc.</small>
          <span asp-validation-for="AnneesExperience" class="text-danger small"></span>
        </div>

        <div class="col-md-4">
          <label class="form-label fw-bold">Projets réalisés</label>
          <input asp-for="ProjetsRealises" class="form-control" placeholder="500+" />
          <small class="text-muted">Ex: 500+, 1000, etc.</small>
          <span asp-validation-for="ProjetsRealises" class="text-danger small"></span>
        </div>

        <div class="col-md-4">
          <label class="form-label fw-bold">Satisfaction client</label>
          <input asp-for="SatisfactionClient" class="form-control" placeholder="100%" />
          <small class="text-muted">Ex: 100%, 98%, etc.</small>
          <span asp-validation-for="SatisfactionClient" class="text-danger small"></span>
        </div>

        <div class="col-12 mt-4">
          <h3 class="h5 fw-bold mb-3">
            <i class="bi bi-share me-2" style="color: #FF6B35;"></i>Réseaux sociaux <small class="text-muted fw-normal">(optionnel - remplir uniquement ceux que vous souhaitez afficher)</small>
          </h3>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-facebook me-2"></i>Facebook
          </label>
          <input asp-for="FacebookUrl" type="text" class="form-control" placeholder="https://facebook.com/..." />
          <span asp-validation-for="FacebookUrl" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-linkedin me-2"></i>LinkedIn
          </label>
          <input asp-for="LinkedInUrl" type="text" class="form-control" placeholder="https://linkedin.com/..." />
          <span asp-validation-for="LinkedInUrl" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-twitter-x me-2"></i>Twitter / X
          </label>
          <input asp-for="TwitterUrl" type="text" class="form-control" placeholder="https://twitter.com/... ou https://x.com/..." />
          <span asp-validation-for="TwitterUrl" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-instagram me-2"></i>Instagram
          </label>
          <input asp-for="InstagramUrl" type="text" class="form-control" placeholder="https://instagram.com/..." />
          <span asp-validation-for="InstagramUrl" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-youtube me-2"></i>YouTube
          </label>
          <input asp-for="YouTubeUrl" type="text" class="form-control" placeholder="https://youtube.com/..." />
          <span asp-validation-for="YouTubeUrl" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-tiktok me-2"></i>TikTok
          </label>
          <input asp-for="TikTokUrl" type="text" class="form-control" placeholder="https://tiktok.com/..." />
          <span asp-validation-for="TikTokUrl" class="text-danger small"></span>
        </div>

        <div class="col-12 mt-4">
          <h3 class="h5 fw-bold mb-3">
            <i class="bi bi-palette me-2" style="color: #FF6B35;"></i>Personnalisation des couleurs
          </h3>
          <p class="text-muted small mb-3">Personnalisez les couleurs principales de votre site. Les couleurs seront appliquées immédiatement après sauvegarde.</p>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-circle-fill me-2" style="color: @(Model.CouleurPrimaire ?? "#FF6B35");"></i>Couleur primaire
          </label>
          <div class="input-group">
            <input type="color" asp-for="CouleurPrimaire" class="form-control form-control-color" value="@(Model.CouleurPrimaire ?? "#FF6B35")" title="Choisir la couleur primaire" />
            <input type="text" asp-for="CouleurPrimaire" class="form-control" placeholder="#FF6B35" pattern="^#[0-9A-Fa-f]{6}$" />
          </div>
          <small class="text-muted">Couleur principale utilisée pour les boutons, liens et éléments importants</small>
          <span asp-validation-for="CouleurPrimaire" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-circle-fill me-2" style="color: @(Model.CouleurSecondaire ?? "#E63946");"></i>Couleur secondaire
          </label>
          <div class="input-group">
            <input type="color" asp-for="CouleurSecondaire" class="form-control form-control-color" value="@(Model.CouleurSecondaire ?? "#E63946")" title="Choisir la couleur secondaire" />
            <input type="text" asp-for="CouleurSecondaire" class="form-control" placeholder="#E63946" pattern="^#[0-9A-Fa-f]{6}$" />
          </div>
          <small class="text-muted">Couleur utilisée pour les éléments secondaires et les accents</small>
          <span asp-validation-for="CouleurSecondaire" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-circle-fill me-2" style="color: @(Model.CouleurAccent ?? "#1E88E5");"></i>Couleur d'accent
          </label>
          <div class="input-group">
            <input type="color" asp-for="CouleurAccent" class="form-control form-control-color" value="@(Model.CouleurAccent ?? "#1E88E5")" title="Choisir la couleur d'accent" />
            <input type="text" asp-for="CouleurAccent" class="form-control" placeholder="#1E88E5" pattern="^#[0-9A-Fa-f]{6}$" />
          </div>
          <small class="text-muted">Couleur utilisée pour les éléments d'accentuation et les liens</small>
          <span asp-validation-for="CouleurAccent" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">
            <i class="bi bi-circle-fill me-2" style="color: @(Model.CouleurOr ?? "#dbb438");"></i>Couleur or
          </label>
          <div class="input-group">
            <input type="color" asp-for="CouleurOr" class="form-control form-control-color" value="@(Model.CouleurOr ?? "#dbb438")" title="Choisir la couleur or" />
            <input type="text" asp-for="CouleurOr" class="form-control" placeholder="#dbb438" pattern="^#[0-9A-Fa-f]{6}$" />
          </div>
          <small class="text-muted">Couleur or utilisée pour les éléments premium et les highlights</small>
          <span asp-validation-for="CouleurOr" class="text-danger small"></span>
        </div>

        <div class="col-12 mt-4">
          <h3 class="h5 fw-bold mb-3">
            <i class="bi bi-sun-moon me-2" style="color: #FF6B35;"></i>Mode d'affichage
          </h3>
        </div>

        <div class="col-12">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" asp-for="ModeSombre" id="modeSombre" style="width: 3rem; height: 1.5rem; cursor: pointer;" />
            <label class="form-check-label fw-bold" for="modeSombre">
              <i class="bi bi-moon-stars-fill me-2"></i>Mode nuit
              <span class="badge bg-secondary ms-2" id="modeStatus">Actuellement: <i class="bi bi-sun-fill"></i> Mode jour</span>
            </label>
            <div class="form-text">
              <strong>Mode jour</strong> : Thème clair par défaut, idéal pour une utilisation en journée.<br/>
              <strong>Mode nuit</strong> : Thème sombre pour un confort visuel optimal, notamment en faible luminosité ou le soir.
            </div>
          </div>
        </div>

        <div class="col-12 mt-4">
          <h3 class="h5 fw-bold mb-3">
            <i class="bi bi-search me-2" style="color: #FF6B35;"></i>SEO (Référencement)
          </h3>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">Titre SEO par défaut</label>
          <input asp-for="SeoTitleDefaut" class="form-control" placeholder="Titre par défaut pour les pages" />
          <small class="text-muted">Utilisé si non spécifié sur une page</small>
          <span asp-validation-for="SeoTitleDefaut" class="text-danger small"></span>
        </div>

        <div class="col-md-6">
          <label class="form-label fw-bold">Description SEO par défaut</label>
          <textarea asp-for="SeoDescriptionDefaut" class="form-control" rows="2" placeholder="Description par défaut pour les pages"></textarea>
          <small class="text-muted">Utilisée si non spécifiée sur une page</small>
          <span asp-validation-for="SeoDescriptionDefaut" class="text-danger small"></span>
        </div>
      </div>

      <div class="mt-4 d-flex gap-2">
        <button class="btn btn-primary" type="submit">
          <i class="bi bi-check-circle me-2"></i>Sauvegarder les paramètres
        </button>
        <a class="btn btn-outline-secondary" href="/Admin/Dashboard">
          <i class="bi bi-arrow-left me-2"></i>Retour au dashboard
        </a>
      </div>
    </form>
  </div>
</div>

@section Scripts {
  <partial name="_ValidationScriptsPartial" />
  <script>
    // Synchronisation entre le sélecteur de couleur et le champ texte
    document.addEventListener('DOMContentLoaded', function() {
      const colorInputs = document.querySelectorAll('input[type="color"]');
      
      colorInputs.forEach(colorInput => {
        const textInput = colorInput.parentElement.querySelector('input[type="text"]');
        
        if (textInput) {
          // Quand la couleur change dans le sélecteur, mettre à jour le champ texte
          colorInput.addEventListener('input', function() {
            textInput.value = this.value.toUpperCase();
          });
          
          // Quand le texte change, mettre à jour le sélecteur (si valide)
          textInput.addEventListener('input', function() {
            if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
              colorInput.value = this.value.toUpperCase();
            }
          });
          
          // Synchroniser au chargement
          if (textInput.value) {
            colorInput.value = textInput.value.toUpperCase();
          }
        }
      });
      
      // Mise à jour du badge pour le mode jour/nuit
      const modeToggle = document.getElementById('modeSombre');
      const modeStatus = document.getElementById('modeStatus');
      
      if (modeToggle && modeStatus) {
        function updateModeStatus() {
          if (modeToggle.checked) {
            modeStatus.innerHTML = 'Actuellement: <i class="bi bi-moon-stars-fill"></i> Mode nuit';
            modeStatus.className = 'badge bg-dark ms-2';
          } else {
            modeStatus.innerHTML = 'Actuellement: <i class="bi bi-sun-fill"></i> Mode jour';
            modeStatus.className = 'badge bg-warning text-dark ms-2';
          }
        }
        
        modeToggle.addEventListener('change', updateModeStatus);
        updateModeStatus(); // Initialiser au chargement
      }
    });
  </script>
}
